<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hbblog</title>
    <link rel="stylesheet" href="./static/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <style>
        .entry__date-time .entry__date-detail {
            visibility: hidden; /* Hide the detail by default */
            position: absolute; /* Position it absolutely to hover correctly */
            background-color: #fff; /* Background color for visibility */
            color: #333; /* Text color for visibility */
            text-align: center;
            padding: 5px;
            border-radius: 5px;
            top: 20px; /* Position it below the date */
            left: 50%; /* Center it horizontally */
            transform: translateX(-50%);
            z-index: 10;
        }

        .entry__date-time:hover .entry__date-detail {
            visibility: visible; /* Show the detail when hovered */
        }

        .dynamic-footer-item:hover {
            color: #ff0000; /* Change color on hover */
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="navbar__brand">
            <img class="navbar__logo" src="static/hblogo.jpg" alt="The MicroBlog Logo" />Hblogs
        </div>
        <ul class="navbar__navigation">
            <li class="navbar__navigation-item"><a href="/recent" class="navbar__link">Recent</a></li>
            <!-- Removed Calendar and replaced with dynamic user info/logout -->
        </ul>
    </header>
    <main class="main">
        <div class="content-wrapper">
            <section class="new-entry">
                <h1>Add New Entry</h1>
                <form class="form" method="POST" action="/">
                    <div class="form__input">
                        <label for="title" class="form__label">Entry Title</label>
                        <input type="text" name="title" id="title" class="form__textarea" required>
                    </div>
                    <div class="form__input">
                        <label for="entry" class="form__label">Entry Contents</label>
                        <textarea class="form__textarea" name="content" id="entry" required></textarea>
                    </div>
                    <button type="submit" class="form__submit">Add Entry</button>
                </form>
            </section>
            <section class="recent-posts">
                <h1>Recent Posts</h1>
                {% for entry in entries[:5] %}
                    <article class="entry">
                        <div>
                            <h2 class="entry__title">{{ entry.title | truncate(30, true) }}</h2>
                            <span class="entry__date-time">
                                <time class="entry__date" datetime="{{ entry.date }}">
                                    â€¢ {{ entry.date }}
                                    <span class="entry__date-detail">{{ entry.time }}</span>
                                </time>
                            </span>
                        </div>
                        <p class="entry__content">{{ entry.content }}</p>
                    </article>
                {% endfor %}
                {% if entries|length > 5 %}
                    <div class="view-more">
                        <hr>
                        <p>To see the remaining posts, click the <a href="/recent" class="navbar__link">Recent</a> tool.</p>
                    </div>
                {% endif %}
            </section>
        </div>
    </main> 
    <footer class="footer">
        <div class="footer_content">
            <section class="left">
                <a class="footer__item">Made by Bilal Habbab</a>
                <a href="/logout" class="footer__item dynamic-footer-item" data-email="{{ user_email }}">Hover me</a>
            </section>
            <section class="right">
                <div class="footer__column">
                    <a class="footer__item">Recent</a>
                </div>
                <div class="footer__column">
                    <a class="footer__item">About</a>
                    <a class="footer__item" href="./source_code">How this was made</a>
                </div>
            </section>
        </div>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const dynamicItem = document.querySelector('.dynamic-footer-item');
            const originalText = dynamicItem.textContent;

            dynamicItem.addEventListener('mouseover', function() {
                this.textContent = 'Logout';
            });

            dynamicItem.addEventListener('mouseout', function() {
                this.textContent = originalText; // Revert back to email or initial text
            });

            dynamicItem.addEventListener('click', function() {
                window.location.href = this.getAttribute('href'); // Redirect to logout
            });
        });
    </script>
</body>
</html>